# 数据驱动分析系统 - UI测试指南

## 🎯 测试目标
验证数据驱动分析报告系统在UI界面的完整功能，确保所有分析内容都基于真实的SQL执行结果。

## 🚀 测试准备

### 1. 环境检查
- ✅ 访问 http://localhost:5670
- ✅ 确认DB-GPT界面正常加载
- ✅ 选择"数据库对话"或"Chat DB"场景
- ✅ 确认数据库连接正常

### 2. 数据库状态确认
```sql
-- 快速检查数据是否存在
SELECT COUNT(*) FROM overdue_rate_stats;
-- 应该返回 > 0 的记录数
```

## 📊 详细测试用例

### **测试用例1: 逾期率专业分析**

#### 输入内容:
```
请分析最近几个月的逾期率趋势，重点关注MOB1-3的表现
```

#### 预期结果验证:
- [ ] **SQL生成**: 包含MOB相关字段的查询
- [ ] **数据返回**: 显示真实的逾期率数据表格
- [ ] **分析报告**: 包含以下部分
  - [ ] 📝 分析摘要：提到具体的记录数和MOB期数
  - [ ] 🔍 关键发现：包含真实的统计数值（如"MOB_1平均逾期率为X.XX%"）
  - [ ] 💡 业务洞察：基于实际数值的风险评估
  - [ ] 🎯 建议措施：针对具体逾期率阈值的建议
  - [ ] 🔬 分析方法：说明基于真实数据的统计分析
- [ ] **SQL显示**: 独立区域显示执行的SQL语句

#### 关键验证点:
```
✅ 检查数值是否为真实计算结果
✅ 确认趋势分析基于数据首末值比较
✅ 验证业务洞察是否针对实际数据特征
```

---

### **测试用例2: DPD根因分析**

#### 输入内容:
```
帮我分析DPD大于30天的逾期根因，生成详细报告
```

#### 预期结果验证:
- [ ] **场景识别**: 系统识别为逾期率分析
- [ ] **专业报告**: 生成金融风险分析专业内容
- [ ] **具体数值**: 所有百分比和统计数据来自真实计算
- [ ] **风险评估**: 基于实际逾期率阈值的风险判断

---

### **测试用例3: 时间序列趋势分析**

#### 输入内容:
```
分析2023年各月份的业务数据变化趋势
```

#### 预期结果验证:
- [ ] **时间维度**: SQL包含时间分组和排序
- [ ] **趋势计算**: 基于真实数据的环比、同比分析
- [ ] **变化率**: 显示具体的数值变化百分比
- [ ] **季节性**: 识别数据中的时间模式

---

### **测试用例4: 通用数据分析**

#### 输入内容:
```
帮我分析客户数据的整体情况，生成数据质量报告
```

#### 预期结果验证:
- [ ] **数据概览**: 显示真实的记录数、字段数
- [ ] **质量评估**: 基于实际缺失值比例的数据质量评分
- [ ] **分布分析**: 数值字段的真实统计分布特征
- [ ] **完整性**: 实际的数据完整度百分比

---

### **测试用例5: 关键词触发测试**

#### 输入内容组合:
```
1. "生成销售数据报告"
2. "做个客户分析总结" 
3. "进行业务数据根因分析"
4. "帮我总结一下数据情况"
```

#### 预期结果验证:
- [ ] **触发成功**: 所有输入都应该生成分析报告
- [ ] **内容差异**: 每个报告内容应该基于不同的实际数据
- [ ] **个性化**: 分析内容应该针对具体的查询结果

---

### **测试用例6: 非分析查询对比**

#### 输入内容:
```
1. "查询用户表的前10条记录"
2. "SELECT * FROM customers LIMIT 5"
3. "显示产品信息"
```

#### 预期结果验证:
- [ ] **无分析报告**: 不应该生成分析报告
- [ ] **纯数据展示**: 只显示查询结果表格
- [ ] **SQL显示**: 仍然显示执行的SQL语句

---

### **测试用例7: 空数据处理**

#### 输入内容:
```
分析2025年的逾期率数据（故意查询不存在的数据）
```

#### 预期结果验证:
- [ ] **空数据报告**: 生成专门的空数据分析报告
- [ ] **原因分析**: 解释可能的查询条件问题
- [ ] **建议措施**: 提供查询优化建议
- [ ] **SQL显示**: 显示执行的SQL语句

## 🔍 验证要点

### **核心验证清单**

#### 1. **数据真实性验证**
```
✅ 所有数值都是基于实际SQL结果计算
✅ 统计指标（均值、最大值、最小值）可以手动验证
✅ 趋势方向与数据变化一致
✅ 百分比计算准确
```

#### 2. **报告结构完整性**
```
✅ 包含5个标准部分：摘要、发现、洞察、建议、方法
✅ 每个部分内容充实且有意义
✅ 格式美观，使用表情符号和Markdown
✅ 中文表达专业准确
```

#### 3. **智能识别准确性**
```
✅ 逾期率分析场景正确识别MOB字段
✅ 时间序列分析场景识别日期字段
✅ 通用分析场景处理其他数据类型
✅ 关键词触发机制工作正常
```

#### 4. **用户体验优化**
```
✅ SQL语句独立显示，便于理解
✅ 数据表格格式清晰
✅ 分析报告内容丰富
✅ 错误处理友好
```

## 🐛 常见问题排查

### **问题1: 分析报告未生成**
**检查步骤:**
1. 确认输入包含分析关键词（分析、报告、总结、根因等）
2. 检查SQL是否执行成功
3. 验证返回数据不为空

### **问题2: 分析内容不准确**
**检查步骤:**
1. 手动验证SQL查询结果
2. 对比报告中的数值与实际数据
3. 检查数据类型和字段名称

### **问题3: 空数据处理**
**检查步骤:**
1. 确认查询条件是否过于严格
2. 验证表中是否存在相关数据
3. 调整时间范围或查询参数

## 📊 测试记录模板

### **测试结果记录表**

| 测试用例 | 输入内容 | SQL生成 | 数据返回 | 分析报告 | 数值准确性 | 状态 |
|---------|---------|---------|---------|---------|-----------|------|
| 用例1 | 逾期率趋势分析 | ✅/❌ | ✅/❌ | ✅/❌ | ✅/❌ | 通过/失败 |
| 用例2 | DPD根因分析 | ✅/❌ | ✅/❌ | ✅/❌ | ✅/❌ | 通过/失败 |
| ... | ... | ... | ... | ... | ... | ... |

### **关键数值验证记录**

```
测试用例: 逾期率分析
实际数据验证:
- MOB_1平均值: [手动计算] vs [报告显示]
- MOB_2平均值: [手动计算] vs [报告显示]  
- 数据记录数: [实际查询] vs [报告显示]
- 趋势方向: [数据对比] vs [报告分析]

验证结果: ✅ 一致 / ❌ 不一致
```

## 🎯 测试成功标准

### **基本功能测试 (必须100%通过)**
- [ ] 分析报告正常生成
- [ ] SQL语句正确执行
- [ ] 数据表格正确显示
- [ ] 关键词识别准确

### **数据准确性测试 (核心验证)**
- [ ] 所有统计数值基于真实数据
- [ ] 趋势分析与实际数据一致
- [ ] 业务洞察针对具体数据特征
- [ ] 建议措施基于实际阈值

### **用户体验测试 (优化验证)**
- [ ] 界面显示美观清晰
- [ ] 分析内容专业易懂
- [ ] 错误处理友好
- [ ] 响应速度合理

## 🚀 开始测试

**推荐测试顺序:**
1. 先测试用例1（逾期率分析）- 验证核心功能
2. 再测试用例6（非分析查询）- 验证对比效果  
3. 然后测试其他用例 - 验证完整功能
4. 最后进行数值准确性验证 - 确保数据真实性

**测试时间估计:** 30-45分钟完成全部测试用例

祝测试顺利！🎉 