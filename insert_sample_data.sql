-- Insert sample data for overdue analysis in test database
USE test;

-- Insert customer information
INSERT INTO customer_info (customer_id, customer_name, age, gender, education, occupation, monthly_income, credit_score, province, city) VALUES
('C001', '张三', 28, '男', '本科', '软件工程师', 15000.00, 750, '北京', '北京'),
('C002', '李四', 35, '女', '硕士', '产品经理', 20000.00, 720, '上海', '上海'),
('C003', '王五', 42, '男', '专科', '销售经理', 12000.00, 680, '广东', '深圳'),
('C004', '赵六', 30, '女', '本科', '会计师', 8000.00, 700, '江苏', '南京'),
('C005', '钱七', 25, '男', '本科', '市场专员', 6000.00, 650, '浙江', '杭州'),
('C006', '孙八', 38, '女', '硕士', '人事总监', 18000.00, 780, '北京', '北京'),
('C007', '周九', 33, '男', '专科', '技术员', 7000.00, 620, '山东', '青岛'),
('C008', '吴十', 29, '女', '本科', '设计师', 9000.00, 690, '四川', '成都'),
('C009', '郑一', 45, '男', '高中', '司机', 5000.00, 580, '河南', '郑州'),
('C010', '王二', 31, '女', '本科', '教师', 7500.00, 710, '湖北', '武汉');

-- Insert loan information
INSERT INTO loan_info (loan_id, customer_id, loan_amount, loan_date, loan_term, interest_rate, product_type, status) VALUES
('L001', 'C001', 100000.00, '2024-01-15', 12, 0.0650, '个人消费贷', 'ACTIVE'),
('L002', 'C002', 200000.00, '2024-01-20', 24, 0.0580, '个人经营贷', 'ACTIVE'),
('L003', 'C003', 150000.00, '2024-02-10', 18, 0.0720, '个人消费贷', 'ACTIVE'),
('L004', 'C004', 80000.00, '2024-02-15', 12, 0.0680, '个人消费贷', 'ACTIVE'),
('L005', 'C005', 50000.00, '2024-03-01', 6, 0.0750, '短期贷款', 'ACTIVE'),
('L006', 'C006', 300000.00, '2024-03-10', 36, 0.0550, '个人经营贷', 'ACTIVE'),
('L007', 'C007', 60000.00, '2024-04-05', 12, 0.0800, '个人消费贷', 'ACTIVE'),
('L008', 'C008', 120000.00, '2024-04-15', 18, 0.0670, '个人消费贷', 'ACTIVE'),
('L009', 'C009', 40000.00, '2024-05-01', 6, 0.0850, '短期贷款', 'OVERDUE'),
('L010', 'C010', 90000.00, '2024-05-10', 12, 0.0690, '个人消费贷', 'ACTIVE');

-- Insert lending details (repayment schedule and actual payments)
INSERT INTO lending_details (loan_id, loan_date, loan_amount, interest_rate, customer_id, period_number, due_date, principal_amount, interest_amount, paid_principal, paid_interest, remaining_principal, payment_date, dpd_days, status) VALUES
-- L001 - 正常还款
('L001', '2024-01-15', 100000.00, 0.0650, 'C001', 1, '2024-02-15', 8333.33, 541.67, 8333.33, 541.67, 91666.67, '2024-02-15', 0, 'PAID'),
('L001', '2024-01-15', 100000.00, 0.0650, 'C001', 2, '2024-03-15', 8333.33, 496.25, 8333.33, 496.25, 83333.34, '2024-03-15', 0, 'PAID'),
('L001', '2024-01-15', 100000.00, 0.0650, 'C001', 3, '2024-04-15', 8333.33, 450.83, 8333.33, 450.83, 75000.01, '2024-04-15', 0, 'PAID'),
('L001', '2024-01-15', 100000.00, 0.0650, 'C001', 4, '2024-05-15', 8333.33, 405.42, 0.00, 0.00, 75000.01, NULL, 15, 'OVERDUE'),

-- L002 - 部分逾期
('L002', '2024-01-20', 200000.00, 0.0580, 'C002', 1, '2024-02-20', 8333.33, 966.67, 8333.33, 966.67, 191666.67, '2024-02-20', 0, 'PAID'),
('L002', '2024-01-20', 200000.00, 0.0580, 'C002', 2, '2024-03-20', 8333.33, 926.25, 8333.33, 926.25, 183333.34, '2024-03-22', 2, 'PAID'),
('L002', '2024-01-20', 200000.00, 0.0580, 'C002', 3, '2024-04-20', 8333.33, 885.83, 0.00, 0.00, 183333.34, NULL, 25, 'OVERDUE'),

-- L009 - 严重逾期
('L009', '2024-05-01', 40000.00, 0.0850, 'C009', 1, '2024-06-01', 6666.67, 283.33, 0.00, 0.00, 40000.00, NULL, 45, 'OVERDUE'),
('L009', '2024-05-01', 40000.00, 0.0850, 'C009', 2, '2024-07-01', 6666.67, 236.11, 0.00, 0.00, 40000.00, NULL, 75, 'OVERDUE');

-- Insert overdue rate statistics
INSERT INTO overdue_rate_stats (stat_date, loan_month, mob, total_loans, total_amount, overdue_loans, overdue_amount, overdue_rate, dpd_threshold) VALUES
('2024-06-30', '2024-01', 1, 2, 300000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-01', 2, 2, 300000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-01', 3, 2, 300000.00, 1, 200000.00, 0.6667, 30),
('2024-06-30', '2024-01', 4, 2, 300000.00, 2, 275000.01, 0.9167, 30),
('2024-06-30', '2024-02', 1, 2, 230000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-02', 2, 2, 230000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-02', 3, 2, 230000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-03', 1, 2, 350000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-03', 2, 2, 350000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-04', 1, 2, 180000.00, 0, 0.00, 0.0000, 30),
('2024-06-30', '2024-05', 1, 2, 130000.00, 1, 40000.00, 0.3077, 30);

-- Insert risk factor analysis
INSERT INTO risk_factor_analysis (analysis_date, factor_type, factor_value, total_loans, overdue_loans, overdue_rate, avg_loan_amount) VALUES
('2024-06-30', '信用评分', '750以上', 2, 0, 0.0000, 200000.00),
('2024-06-30', '信用评分', '700-750', 4, 1, 0.2500, 115000.00),
('2024-06-30', '信用评分', '650-700', 2, 0, 0.0000, 85000.00),
('2024-06-30', '信用评分', '650以下', 2, 1, 0.5000, 45000.00),
('2024-06-30', '贷款金额', '10万以下', 4, 1, 0.2500, 67500.00),
('2024-06-30', '贷款金额', '10-20万', 4, 1, 0.2500, 140000.00),
('2024-06-30', '贷款金额', '20万以上', 2, 0, 0.0000, 250000.00),
('2024-06-30', '地区', '一线城市', 4, 1, 0.2500, 175000.00),
('2024-06-30', '地区', '二线城市', 4, 1, 0.2500, 105000.00),
('2024-06-30', '地区', '其他城市', 2, 0, 0.0000, 50000.00);
